# HEARTBEAT.md - 监控清单

> 版本: v1.0 | 作用: 定义定期检查的优先级和决策逻辑

---

## Priority Checks (优先级检查)

按优先级顺序检查，高优先级优先处理：

### 1. 🔴 No Tags (最高优先级)
**条件**: Task-Board中有未标记状态的任务

**Action**:
- Read任务内容
- 评估复杂度
- Assign给合适的Agent
- 添加 `🟡 TODO` tag

### 2. 🟠 Review (待审核)
**条件**: 有任务标记为 `🟠 Review`

**Action**:
- 检查交付物质量
- 合格 → 标记 `🟢 Done` + 归档
- 不合格 → 标记 `🔵 In Progress` + @Agent返工 + 说明问题

### 3. 🔴 Blocked (阻塞)
**条件**: 有任务标记为 `🔴 Blocked`

**Action**:
- 查看阻塞原因
- 能解决的 → 协助解决，恢复 `🔵 In Progress`
- 不能解决的 → @用户寻求帮助

### 4. 🟡 In Progress > 48h (进展缓慢)
**条件**: `🔵 In Progress` 超过48小时

**Action**:
- @Agent询问进展
- 了解卡点
- 提供协助或重新分配

### 5. 🟡 TODO > 24h (未启动)
**条件**: `🟡 TODO` 超过24小时未启动

**Action**:
- @Agent催促启动
- 了解原因
- 必要时重新分配或调整优先级

---

## Decision Making (决策逻辑)

收到新任务时，按以下逻辑决策：

```
新任务到达
    ↓
评估复杂度
    ↓
├─ 简单任务（<5分钟）→ 自己处理，标记Done
├─ 明确单人任务 → 分配给对应Agent，给方向不给细节
└─ 复杂任务 → 拆解子任务，协调团队讨论
```

### 决策原则

**简单任务**:
- 自己能搞定的
- 不需要其他Agent协作
- **Action**: 直接处理，快速完成

**明确单人任务**:
- 清楚知道该分配给哪个Agent
- 任务边界清晰
- **Action**: 
  - 分配给对应Agent
  - 给出方向性指导（不是详细步骤）
  - Trust LLM的智能

**复杂任务**:
- 需要多个Agent协作
- 需求不明确，需要讨论
- **Action**:
  - 拆解成子任务
  - 逐个召集Agents讨论
  - 避免同时发言造成混乱
  - 统一方案后分配执行

---

## When to Return HEARTBEAT_OK

**返回 HEARTBEAT_OK 的条件**:

- ✅ 所有任务都有明确状态标签
- ✅ 没有阻塞超过24小时的任务
- ✅ 没有超过48小时的In Progress任务
- ✅ 没有需要立即处理的高优先级事项
- ✅ 用户没有 urgent 标记的消息

**即**: 系统运行正常，没有需要干预的事项

---

## 设计理念

### 简洁的检查清单
- 只列出优先级，不规定具体操作
- Trust LLM的判断能力
- 给框架，不给步骤

### 智能决策
- 不试图控制每一步行为
- 定义清晰的角色和价值观（SOUL.md）
- 提供必要的规则和流程（AGENTS.md）
- 给出简洁的检查清单（本文件）
- 信任LLM的智能，让它在框架内自主决策

---

## 执行频率

**默认**: 每30分钟检查一次

**特殊情况**:
- 高优先级任务到达 → 立即检查
- 用户@Main → 立即响应
- 系统异常 → 立即处理

---

*维护者: Main Agent*  
*更新频率: 按需更新*  
*最后更新: 2026-02-26*
